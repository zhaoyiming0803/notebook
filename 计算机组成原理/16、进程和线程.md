### 为什么需要进程？什么是进程？

- 进程是系统进行资源分配和调度的基本单位

- 进程作为程序独立运行的载体保障程序正常执行

- 进程的存在使得操作系统资源的利用率大幅提升

### 进程的实体

PCB：进程控制块

用于描述和控制进程运行的通用数据结构

记录进程当前状态和控制进程运行的去全部信息

PCB的使得进程是能够独立运行的基本单位

PCB是操作系统进行调度经常会被读取的信息

PCB是常驻内存的，存放再系统专门开辟的PCB区域

- 主存中的进程形态

标识符：唯一标记一个进程，用于区别其他进程，如：进程id

状态：标记进程的进程状态，如：运行态

程序计数器：进程即将被执行的下一条指令的地址

内存指针：程序代码、进程数据相关指针

上下文数据：进程执行时处理器存储的数据

IO状态信息：被进程IO操作所占用的文件列表

记账信息：使用处理器时间、时钟数总和等

- 进程与线程

线程是操作系统运行调度的最小单位

线程包含再进程中，是进程中实际运行工作的单位

一个进程可以并发多个线程，每个线程执行不同的任务

### 进程的五状态模型

- 创建

创建进程时拥有PCB但其他资源尚未就绪的状态称为创建状态

操作系统提供 fork 函数接口创建进程

- 就绪

当进程被分配到除CPU以外所有必要的资源后，只要再获得CPU的使用权，就可以立即运行，其他资源都准备好，只差CPU资源的状态就是就绪状态。

在一个系统中多个处于就绪状态的进程通常排成一个队列：

就绪进程1、就绪进程2、就绪进程3......就绪进程N

- 阻塞

进程因某种原因（如其他设备未就绪而无法继续执行），从而放弃CPU的状态称为阻塞状态。

- 执行

进程获取CPU，其程序正在执行称为执行状态，在单处理机中，在某个时刻只能有一个进程是处于执行状态。 

- 终止

进程结束由系统清理或者归还PCB的状态称为终止状态

### 进程同步

- 什么需要进程间同步？

对竞争资源在多进程间进行使用次序的协调

使得并发执行的多个进程之间可以有效使用资源和相互合作

- 进程同步的原则

1、空闲让进：资源无占用，允许使用

2、忙则等待：资源有占用，请求进程等待

3、有限等待：保证有限等待时间能够使用资源

4、让权等待：等待时，进程需要让出CPU

### 进程同步的方法

- 消息队列

- 共享存储

- 信号量

### 线程同步

进程间多线程也可以同步

使用以下方法解决线程同步

- 互斥量

- 读写锁

- 自旋锁

- 条件变量